[2025-09-04 17:33:04] Debug logging started
[2025-09-04 17:33:04] Configuration loaded
[2025-09-04 17:33:04] Debug logging enabled
[2025-09-04 17:33:04] GPU rendering enabled
[2025-09-04 17:33:04] Hardware ID: dd3c616276296b9fca610de827f083ecadf5e3e57d9e73c873282bd2e4138a31
[2025-09-04 17:33:04] App version: 0.10
[2025-09-04 17:33:04] Setting up system tray
[2025-09-04 17:33:04] System tray icon created
[2025-09-04 17:33:04] Testing connection to web server
[2025-09-04 17:33:04] Web server connection successful: {"status": "ok", "user_name": "i7-9700K", "user_id": 1, "server_time": "2025-09-04T14:33:04.849170+00:00", "accepted_version": "0.10"}
[2025-09-04 17:33:05] Storage box connection successful.
[2025-09-04 17:33:05] Cleaning bad tiles from cache before sync
[2025-09-04 17:33:06] CPU threads set to: 8
[2025-09-04 17:33:13] Cancelled pending job retry and cleaned up job request worker
[2025-09-04 17:33:13] Cache cleaning completed
[2025-09-04 17:33:13] Starting map tile cache sync...
[2025-09-04 17:33:13] Found 987 files in OpenTopoMap/OpenTopoMapTiles
[2025-09-04 17:33:13] Found 1111 files in StadiaLight/CustomStadiaTiles
[2025-09-04 17:33:14] Found 6660 files in StadiaOutdoors/CustomStadiaTiles
[2025-09-04 17:33:14] Found 2925 files in StadiaToner/CustomStadiaTiles
[2025-09-04 17:33:14] Found 7464 files in StadiaWatercolor/CustomStadiaTiles
[2025-09-04 17:33:14] Found 10495 files in OSM/OSM
[2025-09-04 17:33:14] Found 10092 files in StadiaDark/CustomStadiaTiles
[2025-09-04 17:33:16] Found 39734 local files and 39734 remote files
[2025-09-04 17:33:17] Starting test video job 1/1: test videos\video test haltiala 20fps
[2025-09-04 17:33:18] === on_job_received called ===
[2025-09-04 17:33:18] Processing job #1000066 (type: video)
[2025-09-04 17:33:18] Creating video generator worker...
[2025-09-04 17:33:25] Connecting worker signals...
[2025-09-04 17:33:25] Starting worker thread...
[2025-09-04 17:33:25] Worker thread started successfully
[2025-09-04 17:33:25] === on_job_received completed successfully ===
[2025-09-04 17:33:25] Files to upload: 0, Files to download: 0
[2025-09-04 17:33:25] Using 1 parallel threads for syncing
[2025-09-04 17:33:25] Map tile cache sync completed. Uploaded: 0, downloaded: 0
[2025-09-04 17:33:25] Checking drive space...
[2025-09-04 17:33:25] Storage box credentials set for background tile syncing
[2025-09-04 17:33:25] Bootup completed successfully
[2025-09-04 17:33:25] Video generation triggered.
[2025-09-04 17:33:25] Step 1: Sorting GPX files chronologically
[2025-09-04 17:33:25] Sorting 8 GPX files chronologically...
[2025-09-04 17:33:25] Found timestamp in 2024-09-12_edited.gpx: 2025-02-01 10:00:00
[2025-09-04 17:33:25] Found timestamp in 2025-07-01(1).gpx: 2025-02-01 10:00:00
[2025-09-04 17:33:25] Found timestamp in 2025-07-01_edited.gpx: 2025-02-01 10:00:00
[2025-09-04 17:33:25] Found timestamp in 2025-07-02(1).gpx: 2025-02-01 10:00:00
[2025-09-04 17:33:25] Found timestamp in 2025-07-02_edited.gpx: 2025-02-01 10:00:00
[2025-09-04 17:33:25] Found timestamp in 2025-07-04_edited.gpx: 2025-02-01 10:00:00
[2025-09-04 17:33:25] Found timestamp in 2020-06-13_3_edited_edited_edited.gpx: 2025-02-01 10:00:00
[2025-09-04 17:33:25] Found timestamp in 2024-04-28_edited_edited(1).gpx: 2025-02-01 10:00:00
[2025-09-04 17:33:25] Chronological sorting completed:
[2025-09-04 17:33:25] Oldest route: 2024-09-12_edited.gpx (2025-02-01 10:00:00)
[2025-09-04 17:33:25] Newest route: 2024-04-28_edited_edited(1).gpx (2025-02-01 10:00:00)
[2025-09-04 17:33:25] Total files sorted: 8
[2025-09-04 17:33:25] Chronological sorting completed with 8 files
[2025-09-04 17:33:25] Step 2: Creating combined route
[2025-09-04 17:33:25] Creating combined routes from sorted GPX files...
[2025-09-04 17:33:25] Multiple routes mode: Found 8 named tracks
[2025-09-04 17:33:25] Creating multiple combined routes...
[2025-09-04 17:33:25] Grouped files by track: 8 named tracks, 0 unnamed files
[2025-09-04 17:33:25]   Track 'Euphemia Muffletop': 1 files
[2025-09-04 17:33:25]   Track 'Neville Dinglewarp': 1 files
[2025-09-04 17:33:25]   Track 'Ramona Glifflepot': 1 files
[2025-09-04 17:33:25]   Track 'Henrietta Bumblesnuff': 1 files
[2025-09-04 17:33:25]   Track 'Tristram Snibbleblat': 1 files
[2025-09-04 17:33:25]   Track 'Cuthbert Flibberdoodle': 1 files
[2025-09-04 17:33:25]   Track 'Celestine Muddlebrim': 1 files
[2025-09-04 17:33:25]   Track 'Clementine Nibberplop': 1 files
[2025-09-04 17:33:25] Processing track 'Euphemia Muffletop' (1/8)
[2025-09-04 17:33:25] Creating route 0 for track 'Euphemia Muffletop' with 1 files
[2025-09-04 17:33:25]   Processing 2024-09-12_edited.gpx, accumulated distance: 0.00 meters, accumulated time: 0.0 seconds
[2025-09-04 17:33:25]   Completed track 'Euphemia Muffletop'. Total points: 397
[2025-09-04 17:33:25]   Total distance: 3404.46 meters (3.40 km)
[2025-09-04 17:33:25]   Total time: 696.0 seconds (11.6 minutes)
[2025-09-04 17:33:25]   Calculated dynamic pruning interval for track 'Euphemia Muffletop': ~1 point/frame → raw=2.32s (gpx_time_per_video_time/video_fps), reduced by 20% → 1.86s, interval=2s
[2025-09-04 17:33:25]   Starting route pruning for track 'Euphemia Muffletop': 397 points, interval: 2 seconds
[2025-09-04 17:33:25]   Interpolation interval for track 'Euphemia Muffletop' (for later use): 4.64s
[2025-09-04 17:33:25] Pruning route by 2 second intervals...
[2025-09-04 17:33:25] Original route has 397 points
[2025-09-04 17:33:25] Pruning complete
[2025-09-04 17:33:25] Interpolation complete: 203 → 227 points
[2025-09-04 17:33:25] Processing track 'Neville Dinglewarp' (2/8)
[2025-09-04 17:33:25] Creating route 1 for track 'Neville Dinglewarp' with 1 files
[2025-09-04 17:33:25]   Processing 2025-07-01(1).gpx, accumulated distance: 0.00 meters, accumulated time: 0.0 seconds
[2025-09-04 17:33:25]   Completed track 'Neville Dinglewarp'. Total points: 451
[2025-09-04 17:33:25]   Total distance: 3629.77 meters (3.63 km)
[2025-09-04 17:33:25]   Total time: 479.0 seconds (8.0 minutes)
[2025-09-04 17:33:25]   Calculated dynamic pruning interval for track 'Neville Dinglewarp': ~1 point/frame → raw=1.60s (gpx_time_per_video_time/video_fps), reduced by 20% → 1.28s, interval=1s
[2025-09-04 17:33:25]   Starting route pruning for track 'Neville Dinglewarp': 451 points, interval: 1 seconds
[2025-09-04 17:33:25]   Interpolation interval for track 'Neville Dinglewarp' (for later use): 3.19s
[2025-09-04 17:33:25] Pruning route by 1 second intervals...
[2025-09-04 17:33:25] Original route has 451 points
[2025-09-04 17:33:25] Pruning complete
[2025-09-04 17:33:25] Interpolation complete: 451 → 451 points
[2025-09-04 17:33:25] Processing track 'Ramona Glifflepot' (3/8)
[2025-09-04 17:33:25] Creating route 2 for track 'Ramona Glifflepot' with 1 files
[2025-09-04 17:33:25]   Processing 2025-07-01_edited.gpx, accumulated distance: 0.00 meters, accumulated time: 0.0 seconds
[2025-09-04 17:33:25]   Completed track 'Ramona Glifflepot'. Total points: 459
[2025-09-04 17:33:25]   Total distance: 3751.54 meters (3.75 km)
[2025-09-04 17:33:25]   Total time: 498.0 seconds (8.3 minutes)
[2025-09-04 17:33:25]   Calculated dynamic pruning interval for track 'Ramona Glifflepot': ~1 point/frame → raw=1.66s (gpx_time_per_video_time/video_fps), reduced by 20% → 1.33s, interval=1s
[2025-09-04 17:33:25]   Starting route pruning for track 'Ramona Glifflepot': 459 points, interval: 1 seconds
[2025-09-04 17:33:25]   Interpolation interval for track 'Ramona Glifflepot' (for later use): 3.32s
[2025-09-04 17:33:25] Pruning route by 1 second intervals...
[2025-09-04 17:33:25] Original route has 459 points
[2025-09-04 17:33:25] Pruning complete
[2025-09-04 17:33:25] Interpolation complete: 459 → 465 points
[2025-09-04 17:33:25] Processing track 'Henrietta Bumblesnuff' (4/8)
[2025-09-04 17:33:25] Creating route 3 for track 'Henrietta Bumblesnuff' with 1 files
[2025-09-04 17:33:25]   Processing 2025-07-02(1).gpx, accumulated distance: 0.00 meters, accumulated time: 0.0 seconds
[2025-09-04 17:33:25]   Completed track 'Henrietta Bumblesnuff'. Total points: 515
[2025-09-04 17:33:25]   Total distance: 4331.41 meters (4.33 km)
[2025-09-04 17:33:25]   Total time: 566.0 seconds (9.4 minutes)
[2025-09-04 17:33:25]   Calculated dynamic pruning interval for track 'Henrietta Bumblesnuff': ~1 point/frame → raw=1.89s (gpx_time_per_video_time/video_fps), reduced by 20% → 1.51s, interval=2s
[2025-09-04 17:33:25]   Starting route pruning for track 'Henrietta Bumblesnuff': 515 points, interval: 2 seconds
[2025-09-04 17:33:25]   Interpolation interval for track 'Henrietta Bumblesnuff' (for later use): 3.77s
[2025-09-04 17:33:25] Pruning route by 2 second intervals...
[2025-09-04 17:33:25] Original route has 515 points
[2025-09-04 17:33:25] Pruning complete
[2025-09-04 17:33:25] Interpolation complete: 260 → 266 points
[2025-09-04 17:33:25] Processing track 'Tristram Snibbleblat' (5/8)
[2025-09-04 17:33:25] Creating route 4 for track 'Tristram Snibbleblat' with 1 files
[2025-09-04 17:33:25]   Processing 2025-07-02_edited.gpx, accumulated distance: 0.00 meters, accumulated time: 0.0 seconds
[2025-09-04 17:33:25]   Completed track 'Tristram Snibbleblat'. Total points: 449
[2025-09-04 17:33:25]   Total distance: 3552.61 meters (3.55 km)
[2025-09-04 17:33:25]   Total time: 481.0 seconds (8.0 minutes)
[2025-09-04 17:33:25]   Calculated dynamic pruning interval for track 'Tristram Snibbleblat': ~1 point/frame → raw=1.60s (gpx_time_per_video_time/video_fps), reduced by 20% → 1.28s, interval=1s
[2025-09-04 17:33:25]   Starting route pruning for track 'Tristram Snibbleblat': 449 points, interval: 1 seconds
[2025-09-04 17:33:25]   Interpolation interval for track 'Tristram Snibbleblat' (for later use): 3.21s
[2025-09-04 17:33:25] Pruning route by 1 second intervals...
[2025-09-04 17:33:25] Original route has 449 points
[2025-09-04 17:33:25] Pruning complete
[2025-09-04 17:33:25] Interpolation complete: 449 → 451 points
[2025-09-04 17:33:25] Processing track 'Cuthbert Flibberdoodle' (6/8)
[2025-09-04 17:33:25] Creating route 5 for track 'Cuthbert Flibberdoodle' with 1 files
[2025-09-04 17:33:25]   Processing 2025-07-04_edited.gpx, accumulated distance: 0.00 meters, accumulated time: 0.0 seconds
[2025-09-04 17:33:25]   Completed track 'Cuthbert Flibberdoodle'. Total points: 501
[2025-09-04 17:33:25]   Total distance: 4338.87 meters (4.34 km)
[2025-09-04 17:33:25]   Total time: 536.0 seconds (8.9 minutes)
[2025-09-04 17:33:25]   Calculated dynamic pruning interval for track 'Cuthbert Flibberdoodle': ~1 point/frame → raw=1.79s (gpx_time_per_video_time/video_fps), reduced by 20% → 1.43s, interval=1s
[2025-09-04 17:33:25]   Starting route pruning for track 'Cuthbert Flibberdoodle': 501 points, interval: 1 seconds
[2025-09-04 17:33:26]   Interpolation interval for track 'Cuthbert Flibberdoodle' (for later use): 3.57s
[2025-09-04 17:33:26] Pruning route by 1 second intervals...
[2025-09-04 17:33:26] Original route has 501 points
[2025-09-04 17:33:26] Pruning complete
[2025-09-04 17:33:26] Interpolation complete: 501 → 503 points
[2025-09-04 17:33:26] Processing track 'Celestine Muddlebrim' (7/8)
[2025-09-04 17:33:26] Creating route 6 for track 'Celestine Muddlebrim' with 1 files
[2025-09-04 17:33:26]   Processing 2020-06-13_3_edited_edited_edited.gpx, accumulated distance: 0.00 meters, accumulated time: 0.0 seconds
[2025-09-04 17:33:26]   Completed track 'Celestine Muddlebrim'. Total points: 381
[2025-09-04 17:33:26]   Total distance: 3553.20 meters (3.55 km)
[2025-09-04 17:33:26]   Total time: 554.0 seconds (9.2 minutes)
[2025-09-04 17:33:26]   Calculated dynamic pruning interval for track 'Celestine Muddlebrim': ~1 point/frame → raw=1.85s (gpx_time_per_video_time/video_fps), reduced by 20% → 1.48s, interval=1s
[2025-09-04 17:33:26]   Starting route pruning for track 'Celestine Muddlebrim': 381 points, interval: 1 seconds
[2025-09-04 17:33:26]   Interpolation interval for track 'Celestine Muddlebrim' (for later use): 3.69s
[2025-09-04 17:33:26] Pruning route by 1 second intervals...
[2025-09-04 17:33:26] Original route has 381 points
[2025-09-04 17:33:26] Pruning complete
[2025-09-04 17:33:26] Interpolation complete: 381 → 381 points
[2025-09-04 17:33:26] Processing track 'Clementine Nibberplop' (8/8)
[2025-09-04 17:33:26] Creating route 7 for track 'Clementine Nibberplop' with 1 files
[2025-09-04 17:33:26]   Processing 2024-04-28_edited_edited(1).gpx, accumulated distance: 0.00 meters, accumulated time: 0.0 seconds
[2025-09-04 17:33:26]   Completed track 'Clementine Nibberplop'. Total points: 749
[2025-09-04 17:33:26]   Total distance: 5830.57 meters (5.83 km)
[2025-09-04 17:33:26]   Total time: 756.8 seconds (12.6 minutes)
[2025-09-04 17:33:26]   Calculated dynamic pruning interval for track 'Clementine Nibberplop': ~1 point/frame → raw=2.52s (gpx_time_per_video_time/video_fps), reduced by 20% → 2.02s, interval=2s
[2025-09-04 17:33:26]   Starting route pruning for track 'Clementine Nibberplop': 749 points, interval: 2 seconds
[2025-09-04 17:33:26]   Interpolation interval for track 'Clementine Nibberplop' (for later use): 5.05s
[2025-09-04 17:33:26] Pruning route by 2 second intervals...
[2025-09-04 17:33:26] Original route has 749 points
[2025-09-04 17:33:26] Pruning complete
[2025-09-04 17:33:26] Interpolation complete: 257 → 289 points
[2025-09-04 17:33:26] SIMULTANEOUS MODE ANALYSIS:
[2025-09-04 17:33:26]   Earliest route starts at: 10:00:00
[2025-09-04 17:33:26]   Latest route ends at: 10:12:36
[2025-09-04 17:33:26]   Total span of all routes: 756.8s (12.6 minutes)
[2025-09-04 17:33:26]   Video duration: 15.0s
[2025-09-04 17:33:26] SIMULTANEOUS MODE FIX: Using total span: 756.8s
[2025-09-04 17:33:26]   This allows all routes to be drawn at their proper staggered times
[2025-09-04 17:33:26]   Routes that start after 15.0s won't appear in the video
[2025-09-04 17:33:26] Created 8 routes:
[2025-09-04 17:33:26]   Route 0: 'Euphemia Muffletop' - 227 points, 3404.46m
[2025-09-04 17:33:26]   Route 1: 'Neville Dinglewarp' - 451 points, 3629.77m
[2025-09-04 17:33:26]   Route 2: 'Ramona Glifflepot' - 465 points, 3751.54m
[2025-09-04 17:33:26]   Route 3: 'Henrietta Bumblesnuff' - 266 points, 4331.41m
[2025-09-04 17:33:26]   Route 4: 'Tristram Snibbleblat' - 451 points, 3552.61m
[2025-09-04 17:33:26]   Route 5: 'Cuthbert Flibberdoodle' - 503 points, 4338.87m
[2025-09-04 17:33:26]   Route 6: 'Celestine Muddlebrim' - 381 points, 3553.20m
[2025-09-04 17:33:26]   Route 7: 'Clementine Nibberplop' - 289 points, 5794.24m
[2025-09-04 17:33:26] Total across all routes: 3033 points, 32356.10m
[2025-09-04 17:33:26] Wrote debug_tuple.txt successfully to temporary files\route\debug_tuple.txt
[2025-09-04 17:33:26] Combined route created successfully:
[2025-09-04 17:33:26]   - Total points: 227
[2025-09-04 17:33:26]   - Total distance: 3.40 km
[2025-09-04 17:33:26]   - Files processed: 8
[2025-09-04 17:33:26] Step 3: Calculating unique bounding boxes and caching map tiles
[2025-09-04 17:33:26] Starting map tile caching
[2025-09-04 17:33:26] Calculating unique bounding boxes for 300 frames
[2025-09-04 17:33:26] Using 'final' zoom mode - calculating single bounding box for entire route
[2025-09-04 17:33:26] Final zoom mode: Collecting points from 8 routes
[2025-09-04 17:33:26] Final zoom mode: Total points from all routes: 3033
[2025-09-04 17:33:26] Saved final bounding box to temporary files\route\final_bounding_box.pkl
[2025-09-04 17:33:26] Final zoom mode: calculated single bounding box (24.882359, 24.972879, 60.252242, 60.277497) from 8 routes
[2025-09-04 17:33:26] Found 1 unique bounding boxes
[2025-09-04 17:33:26] Starting tile pre-caching for video generation
[2025-09-04 17:33:26] Using cache directory: X:\softa\code\Projects\Route squiggler render client\map tile cache\StadiaOutdoors
[2025-09-04 17:33:26] Processing 1 unique bounding boxes
[2025-09-04 17:33:26] Phase 1: Gathering all required tiles...
[2025-09-04 17:33:26] Found 50 unique tiles required across all bounding boxes
[2025-09-04 17:33:26] Phase 2: Checking which tiles are already cached...
[2025-09-04 17:33:26] Tile analysis complete: 50 already cached, 0 need downloading
[2025-09-04 17:33:26] All tiles are already cached! No downloads needed.
[2025-09-04 17:33:26] Starting render timer - beginning map image caching and video generation
[2025-09-04 17:33:27] Starting route image caching for final zoom mode optimization (shared memory)...
[2025-09-04 17:33:27] Loaded final bounding box: (24.882359, 24.972879, 60.252242, 60.277497)
[2025-09-04 17:33:27] Using final bounding box: (24.882359, 24.972879, 60.252242, 60.277497)
[2025-09-04 17:33:27] Caching route 1/8: 'Euphemia Muffletop' (227 points, route_index=0)
[2025-09-04 17:33:27] Caching route 2/8: 'Neville Dinglewarp' (451 points, route_index=1)
[2025-09-04 17:33:27] Caching route 3/8: 'Ramona Glifflepot' (465 points, route_index=2)
[2025-09-04 17:33:27] Caching route 4/8: 'Henrietta Bumblesnuff' (266 points, route_index=3)
[2025-09-04 17:33:27] Caching route 5/8: 'Tristram Snibbleblat' (451 points, route_index=4)
[2025-09-04 17:33:27] Caching route 6/8: 'Cuthbert Flibberdoodle' (503 points, route_index=5)
[2025-09-04 17:33:27] Caching route 7/8: 'Celestine Muddlebrim' (381 points, route_index=6)
[2025-09-04 17:33:27] Caching route 8/8: 'Clementine Nibberplop' (289 points, route_index=7)
[2025-09-04 17:33:27] Route image caching completed: 8 track images cached from 8 routes in shared memory
[2025-09-04 17:33:27] Built track-to-cache mapping with 8 entries for frame generation optimization
[2025-09-04 17:33:27] Step 4: Caching map images for unique bounding boxes
[2025-09-04 17:33:27] Starting map image caching
[2025-09-04 17:33:27] Calculating unique bounding boxes for 300 frames
[2025-09-04 17:33:27] Using 'final' zoom mode - calculating single bounding box for entire route
[2025-09-04 17:33:27] Final zoom mode: Collecting points from 8 routes
[2025-09-04 17:33:27] Final zoom mode: Total points from all routes: 3033
[2025-09-04 17:33:27] Saved final bounding box to temporary files\route\final_bounding_box.pkl
[2025-09-04 17:33:27] Final zoom mode: calculated single bounding box (24.882359, 24.972879, 60.252242, 60.277497) from 8 routes
[2025-09-04 17:33:27] Found 1 unique bounding boxes
[2025-09-04 17:33:27] Starting map image caching for video generation
[2025-09-04 17:33:27] Processing 1 unique bounding boxes for map images
[2025-09-04 17:33:27] Using 1 worker processes for map image generation
[2025-09-04 17:33:28] Using single-threaded execution
[2025-09-04 17:33:29] Map image caching complete: 1 successful, 0 failed, 1 total
[2025-09-04 17:33:29] Map image caching completed:
[2025-09-04 17:33:29]   - Images created: 1
[2025-09-04 17:33:29]   - Images failed: 0
[2025-09-04 17:33:29]   - Total bounding boxes: 1
[2025-09-04 17:33:29] Step 5: Generating video frames
[2025-09-04 17:33:29] Starting video generation
[2025-09-04 17:33:29] Route time per frame: 2.5227 seconds
[2025-09-04 17:33:29] Starting video frame generation with streaming approach...
[2025-09-04 17:33:29] Starting streaming video creation
[2025-09-04 17:33:29] SIMULTANEOUS MODE: Creating video: 15.0s route + 5.0s cloned = 20.0s total
[2025-09-04 17:33:29] Each route handles its own completion and tail fade-out individually
[2025-09-04 17:33:29] Frame breakdown: 300 route + 100 cloned = 400 total frames
[2025-09-04 17:33:29] Output video will be saved to: temporary files\test jobs\route_video_20250904_173329.mp4
[2025-09-04 17:33:29] Test job mode: Video will be saved in test jobs directory
[2025-09-04 17:33:33] Starting video encoding
[2025-09-04 17:33:33] Using GPU rendering (NVIDIA NVENC)
[2025-09-04 17:34:37] Streaming video creation complete: temporary files\test jobs\route_video_20250904_173329.mp4
[2025-09-04 17:34:37] MoviePy and FFmpeg processes cleaned up
[2025-09-04 17:34:37] SIMULTANEOUS MODE: Video creation completed: 300 frames generated + 100 frames cloned = 400 total frames
[2025-09-04 17:34:37] Video frame generation completed:
[2025-09-04 17:34:37]   - Frames created: 300
[2025-09-04 17:34:37]   - Frames failed: 0
[2025-09-04 17:34:37]   - Total frames: 400
[2025-09-04 17:34:37]   - Video file: temporary files\test jobs\route_video_20250904_173329.mp4
[2025-09-04 17:34:37] 🎬 Total rendering time: 1 minute 11.92 seconds
[2025-09-04 17:34:37] Test job completed - skipping upload
[2025-09-04 17:34:37] Video generation completed successfully
[2025-09-04 17:34:38] Matplotlib and Qt resources cleaned up
[2025-09-04 17:34:38] Force-killed any remaining FFmpeg processes
[2025-09-04 17:34:38] MoviePy and FFmpeg processes cleaned up
[2025-09-04 17:34:38] Matplotlib and Qt resources cleaned up
[2025-09-04 17:34:38] Force-killed any remaining FFmpeg processes
[2025-09-04 17:34:38] MoviePy and FFmpeg processes cleaned up
[2025-09-04 17:34:38] Forced Qt resource cleanup completed
[2025-09-04 17:34:38] All test video jobs completed.
[2025-09-04 17:34:42] Starting test video job 1/1: test videos\video test rusutjärvi
[2025-09-04 17:34:42] === on_job_received called ===
[2025-09-04 17:34:42] Processing job #1000141 (type: video)
[2025-09-04 17:34:42] Creating video generator worker...
[2025-09-04 17:34:42] Connecting worker signals...
[2025-09-04 17:34:42] Starting worker thread...
[2025-09-04 17:34:42] Worker thread started successfully
[2025-09-04 17:34:42] === on_job_received completed successfully ===
[2025-09-04 17:34:42] Video generation triggered.
[2025-09-04 17:34:42] Step 1: Sorting GPX files chronologically
[2025-09-04 17:34:42] Sorting 2 GPX files chronologically...
[2025-09-04 17:34:42] Found timestamp in 2025-07-28.gpx: 2025-07-28 15:20:58
[2025-09-04 17:34:42] Found timestamp in 2025-07-28-1.gpx: 2025-07-28 17:53:54
[2025-09-04 17:34:42] Chronological sorting completed:
[2025-09-04 17:34:42] Oldest route: 2025-07-28.gpx (2025-07-28 15:20:58)
[2025-09-04 17:34:42] Newest route: 2025-07-28-1.gpx (2025-07-28 17:53:54)
[2025-09-04 17:34:42] Total files sorted: 2
[2025-09-04 17:34:42] Chronological sorting completed with 2 files
[2025-09-04 17:34:42] Step 2: Creating combined route
[2025-09-04 17:34:42] Creating combined routes from sorted GPX files...
[2025-09-04 17:34:42] Single route mode: All track names are empty
[2025-09-04 17:34:42] Creating single combined route...
[2025-09-04 17:34:42] Grouped files by track: 0 named tracks, 2 unnamed files
[2025-09-04 17:34:42] Processing 2 unnamed files
[2025-09-04 17:34:42] Creating route 0 for track 'Unnamed' with 2 files
[2025-09-04 17:34:42]   Processing 2025-07-28.gpx, accumulated distance: 0.00 meters, accumulated time: 0.0 seconds
[2025-09-04 17:34:43]   Processing 2025-07-28-1.gpx, accumulated distance: 14900.31 meters, accumulated time: 2546.0 seconds
[2025-09-04 17:34:43]   Completed track 'Unnamed'. Total points: 3095
[2025-09-04 17:34:43]   Total distance: 35801.57 meters (35.80 km)
[2025-09-04 17:34:43]   Total time: 6069.0 seconds (101.2 minutes)
[2025-09-04 17:34:43]   Route pruning skipped for track 'Unnamed' as per job parameters (route_accuracy = 'maximum').
[2025-09-04 17:34:43] Single route mode: Using sequential time accumulation: 6069.0s
[2025-09-04 17:34:43] Created 1 routes:
[2025-09-04 17:34:43]   Route 0: 'Unnamed' - 3095 points, 35801.57m
[2025-09-04 17:34:43] Total across all routes: 3095 points, 35801.57m
[2025-09-04 17:34:43] Wrote debug_tuple.txt successfully to temporary files\route\debug_tuple.txt
[2025-09-04 17:34:43] Combined route created successfully:
[2025-09-04 17:34:43]   - Total points: 3,095
[2025-09-04 17:34:43]   - Total distance: 35.80 km
[2025-09-04 17:34:43]   - Files processed: 2
[2025-09-04 17:34:43] Step 3: Calculating unique bounding boxes and caching map tiles
[2025-09-04 17:34:43] Starting map tile caching
[2025-09-04 17:34:43] Calculating unique bounding boxes for 100 frames
[2025-09-04 17:34:43] Using 'dynamic' zoom mode - calculating bounding boxes for each frame
[2025-09-04 17:34:43] Created 1 chunks of up to 500 frames each
[2025-09-04 17:34:43] Using 1 worker processes (limited by CPU cores: 8, chunks: 1, user setting: 8)
[2025-09-04 17:34:43] Starting parallel processing of frame chunks
[2025-09-04 17:34:44] Collected 100 total bounding boxes
[2025-09-04 17:34:44] Found 52 unique bounding boxes
[2025-09-04 17:34:44] Starting tile pre-caching for video generation
[2025-09-04 17:34:44] Using cache directory: X:\softa\code\Projects\Route squiggler render client\map tile cache\StadiaDark
[2025-09-04 17:34:44] Processing 52 unique bounding boxes
[2025-09-04 17:34:44] Phase 1: Gathering all required tiles...
[2025-09-04 17:34:44] Zoom level 18 too high for video mode, capping to 17
[2025-09-04 17:34:44] Found 405 unique tiles required across all bounding boxes
[2025-09-04 17:34:44] Phase 2: Checking which tiles are already cached...
[2025-09-04 17:34:44] Tile analysis complete: 405 already cached, 0 need downloading
[2025-09-04 17:34:44] All tiles are already cached! No downloads needed.
[2025-09-04 17:34:44] Starting render timer - beginning map image caching and video generation
[2025-09-04 17:34:45] Skipping route image caching - only applicable to 'final' zoom mode
[2025-09-04 17:34:45] Step 4: Caching map images for unique bounding boxes
[2025-09-04 17:34:45] Starting map image caching
[2025-09-04 17:34:45] Calculating unique bounding boxes for 100 frames
[2025-09-04 17:34:45] Using 'dynamic' zoom mode - calculating bounding boxes for each frame
[2025-09-04 17:34:45] Created 1 chunks of up to 500 frames each
[2025-09-04 17:34:45] Using 1 worker processes (limited by CPU cores: 8, chunks: 1, user setting: 8)
[2025-09-04 17:34:45] Starting parallel processing of frame chunks
[2025-09-04 17:34:46] Collected 100 total bounding boxes
[2025-09-04 17:34:46] Found 52 unique bounding boxes
[2025-09-04 17:34:46] Starting map image caching for video generation
[2025-09-04 17:34:46] Processing 52 unique bounding boxes for map images
[2025-09-04 17:34:46] Using 8 worker processes for map image generation
[2025-09-04 17:34:47] Using multi-threaded execution with 8 workers
[2025-09-04 17:34:55] Map image caching complete: 52 successful, 0 failed, 52 total
[2025-09-04 17:34:55] Map image caching completed:
[2025-09-04 17:34:55]   - Images created: 52
[2025-09-04 17:34:55]   - Images failed: 0
[2025-09-04 17:34:55]   - Total bounding boxes: 52
[2025-09-04 17:34:55] Step 5: Generating video frames
[2025-09-04 17:34:55] Starting video generation
[2025-09-04 17:34:55] Route time per frame: 61.3030 seconds
[2025-09-04 17:34:55] Starting video frame generation with streaming approach...
[2025-09-04 17:34:55] Starting streaming video creation
[2025-09-04 17:34:55] SEQUENTIAL MODE: Creating video: 5.0s route + 4s tail + 1.0s cloned = 10.0s total
[2025-09-04 17:34:55] Frame breakdown: 100 route + 80 tail + 20 cloned = 200 total frames
[2025-09-04 17:34:55] Output video will be saved to: temporary files\test jobs\route_video_20250904_173455.mp4
[2025-09-04 17:34:55] Test job mode: Video will be saved in test jobs directory
[2025-09-04 17:34:59] Starting video encoding
[2025-09-04 17:34:59] Using GPU rendering (NVIDIA NVENC)
[2025-09-04 17:35:34] Streaming video creation complete: temporary files\test jobs\route_video_20250904_173455.mp4
[2025-09-04 17:35:34] MoviePy and FFmpeg processes cleaned up
[2025-09-04 17:35:34] SEQUENTIAL MODE: Video creation completed: 180 frames generated + 20 frames cloned = 200 total frames
[2025-09-04 17:35:34] Video frame generation completed:
[2025-09-04 17:35:34]   - Frames created: 180
[2025-09-04 17:35:34]   - Frames failed: 0
[2025-09-04 17:35:34]   - Total frames: 200
[2025-09-04 17:35:34]   - Video file: temporary files\test jobs\route_video_20250904_173455.mp4
[2025-09-04 17:35:34] 🎬 Total rendering time: 50.55 seconds
[2025-09-04 17:35:34] Test job completed - skipping upload
[2025-09-04 17:35:34] Video generation completed successfully
[2025-09-04 17:35:35] Matplotlib and Qt resources cleaned up
[2025-09-04 17:35:35] Force-killed any remaining FFmpeg processes
[2025-09-04 17:35:35] MoviePy and FFmpeg processes cleaned up
[2025-09-04 17:35:35] Matplotlib and Qt resources cleaned up
[2025-09-04 17:35:35] Force-killed any remaining FFmpeg processes
[2025-09-04 17:35:35] MoviePy and FFmpeg processes cleaned up
[2025-09-04 17:35:35] Forced Qt resource cleanup completed
[2025-09-04 17:35:35] All test video jobs completed.
[2025-09-04 17:36:24] Starting test video job 1/1: test videos\video test 20routes
[2025-09-04 17:36:24] === on_job_received called ===
[2025-09-04 17:36:24] Processing job #1000023 (type: video)
[2025-09-04 17:36:24] Creating video generator worker...
[2025-09-04 17:36:24] Connecting worker signals...
[2025-09-04 17:36:24] Starting worker thread...
[2025-09-04 17:36:24] Worker thread started successfully
[2025-09-04 17:36:24] === on_job_received completed successfully ===
[2025-09-04 17:36:24] Video generation triggered.
[2025-09-04 17:36:24] Step 1: Sorting GPX files chronologically
[2025-09-04 17:36:24] Sorting 20 GPX files chronologically...
[2025-09-04 17:36:24] Found timestamp in 2024-05-18 kehä3.gpx: 2024-05-18 14:20:24
[2025-09-04 17:36:24] Found timestamp in 2022-06-26.gpx: 2022-06-26 17:24:08
[2025-09-04 17:36:24] Found timestamp in 2023-06-02.gpx: 2023-06-02 19:40:06
[2025-09-04 17:36:24] Found timestamp in 2023-06-13.gpx: 2023-06-13 17:25:05
[2025-09-04 17:36:24] Found timestamp in 2023-06-14.gpx: 2023-06-14 18:17:49
[2025-09-04 17:36:24] Found timestamp in 2024-05-19.gpx: 2024-05-19 16:17:36
[2025-09-04 17:36:24] Found timestamp in 2024-06-27.gpx: 2024-06-27 18:09:54
[2025-09-04 17:36:24] Found timestamp in 2024-07-09.gpx: 2024-07-09 13:46:48
[2025-09-04 17:36:24] Found timestamp in 2018-05-23.gpx: 2018-05-23 14:01:17
[2025-09-04 17:36:24] Found timestamp in 2018-06-10.gpx: 2018-06-10 12:56:58
[2025-09-04 17:36:24] Found timestamp in 2018-07-15.gpx: 2018-07-15 15:43:29
[2025-09-04 17:36:24] Found timestamp in 2018-07-17.gpx: 2018-07-17 19:05:37
[2025-09-04 17:36:24] Found timestamp in 2019-12-04_4.gpx: 2019-12-04 17:44:43
[2025-09-04 17:36:24] Found timestamp in 2019-12-14.gpx: 2019-12-14 20:24:01
[2025-09-04 17:36:24] Found timestamp in 2020-06-13_2.gpx: 2020-06-13 08:44:35
[2025-09-04 17:36:24] Found timestamp in 2020-06-13_3.gpx: 2020-06-13 14:30:06
[2025-09-04 17:36:24] Found timestamp in 2020-06-26.gpx: 2020-06-26 14:11:32
[2025-09-04 17:36:24] Found timestamp in 2021-05-14.gpx: 2021-05-14 09:00:48
[2025-09-04 17:36:24] Found timestamp in 2021-05-16.gpx: 2021-05-16 10:28:27
[2025-09-04 17:36:24] Found timestamp in 2021-06-10.gpx: 2021-06-10 13:25:14
[2025-09-04 17:36:24] Chronological sorting completed:
[2025-09-04 17:36:24] Oldest route: 2018-05-23.gpx (2018-05-23 14:01:17)
[2025-09-04 17:36:24] Newest route: 2024-07-09.gpx (2024-07-09 13:46:48)
[2025-09-04 17:36:24] Total files sorted: 20
[2025-09-04 17:36:24] Chronological sorting completed with 20 files
[2025-09-04 17:36:24] Step 2: Creating combined route
[2025-09-04 17:36:24] Creating combined routes from sorted GPX files...
[2025-09-04 17:36:24] Single route mode: All track names are empty
[2025-09-04 17:36:24] Creating single combined route...
[2025-09-04 17:36:24] Grouped files by track: 0 named tracks, 20 unnamed files
[2025-09-04 17:36:24] Processing 20 unnamed files
[2025-09-04 17:36:24] Creating route 0 for track 'Unnamed' with 20 files
[2025-09-04 17:36:24]   Processing 2018-05-23.gpx, accumulated distance: 0.00 meters, accumulated time: 0.0 seconds
[2025-09-04 17:36:24]   Processing 2018-06-10.gpx, accumulated distance: 31766.06 meters, accumulated time: 8347.0 seconds
[2025-09-04 17:36:24]   Processing 2018-07-15.gpx, accumulated distance: 79270.87 meters, accumulated time: 22165.0 seconds
[2025-09-04 17:36:25]   Processing 2018-07-17.gpx, accumulated distance: 123163.43 meters, accumulated time: 34298.0 seconds
[2025-09-04 17:36:25]   Processing 2019-12-04_4.gpx, accumulated distance: 150638.62 meters, accumulated time: 43773.0 seconds
[2025-09-04 17:36:25]   Processing 2019-12-14.gpx, accumulated distance: 154212.81 meters, accumulated time: 44680.0 seconds
[2025-09-04 17:36:25]   Processing 2020-06-13_2.gpx, accumulated distance: 168516.68 meters, accumulated time: 48134.0 seconds
[2025-09-04 17:36:25]   Processing 2020-06-13_3.gpx, accumulated distance: 185668.60 meters, accumulated time: 53974.0 seconds
[2025-09-04 17:36:25]   Processing 2020-06-26.gpx, accumulated distance: 224062.39 meters, accumulated time: 65738.0 seconds
[2025-09-04 17:36:25]   Processing 2021-05-14.gpx, accumulated distance: 236125.01 meters, accumulated time: 68845.0 seconds
[2025-09-04 17:36:26]   Processing 2021-05-16.gpx, accumulated distance: 278494.00 meters, accumulated time: 87434.0 seconds
[2025-09-04 17:36:26]   Processing 2021-06-10.gpx, accumulated distance: 335424.71 meters, accumulated time: 106374.0 seconds
[2025-09-04 17:36:27]   Processing 2022-06-26.gpx, accumulated distance: 386143.25 meters, accumulated time: 121939.0 seconds
[2025-09-04 17:36:27]   Processing 2023-06-02.gpx, accumulated distance: 392320.90 meters, accumulated time: 123449.0 seconds
[2025-09-04 17:36:27]   Processing 2023-06-13.gpx, accumulated distance: 412048.24 meters, accumulated time: 131290.0 seconds
[2025-09-04 17:36:27]   Processing 2023-06-14.gpx, accumulated distance: 419424.06 meters, accumulated time: 132944.0 seconds
[2025-09-04 17:36:27]   Processing 2024-05-18 kehä3.gpx, accumulated distance: 433614.80 meters, accumulated time: 136591.0 seconds
[2025-09-04 17:36:27]   Processing 2024-05-19.gpx, accumulated distance: 535197.70 meters, accumulated time: 160066.0 seconds
[2025-09-04 17:36:27]   Processing 2024-06-27.gpx, accumulated distance: 547227.03 meters, accumulated time: 161873.0 seconds
[2025-09-04 17:36:27]   Processing 2024-07-09.gpx, accumulated distance: 563755.60 meters, accumulated time: 165157.0 seconds
[2025-09-04 17:36:28]   Completed track 'Unnamed'. Total points: 59197
[2025-09-04 17:36:28]   Total distance: 600084.41 meters (600.08 km)
[2025-09-04 17:36:28]   Total time: 171594.0 seconds (2859.9 minutes)
[2025-09-04 17:36:28]   Calculated dynamic pruning interval for track 'Unnamed': ~1 point/frame → raw=2318.84s (gpx_time_per_video_time/video_fps), reduced by 20% → 1855.07s, interval=1855s
[2025-09-04 17:36:28]   Starting route pruning for track 'Unnamed': 59,197 points, interval: 1855 seconds
[2025-09-04 17:36:28]   Interpolation interval for track 'Unnamed' (for later use): 4637.68s
[2025-09-04 17:36:28] Pruning route by 1855 second intervals...
[2025-09-04 17:36:28] Original route has 59197 points
[2025-09-04 17:36:28] Pruning complete
[2025-09-04 17:36:28] Interpolation complete: 96 → 96 points
[2025-09-04 17:36:28] Single route mode: Using sequential time accumulation: 149924.0s
[2025-09-04 17:36:28] Created 1 routes:
[2025-09-04 17:36:28]   Route 0: 'Unnamed' - 96 points, 327850.27m
[2025-09-04 17:36:28] Total across all routes: 96 points, 327850.27m
[2025-09-04 17:36:28] Wrote debug_tuple.txt successfully to temporary files\route\debug_tuple.txt
[2025-09-04 17:36:28] Combined route created successfully:
[2025-09-04 17:36:28]   - Total points: 96
[2025-09-04 17:36:28]   - Total distance: 327.85 km
[2025-09-04 17:36:28]   - Files processed: 20
[2025-09-04 17:36:28] Step 3: Calculating unique bounding boxes and caching map tiles
[2025-09-04 17:36:28] Starting map tile caching
[2025-09-04 17:36:28] Calculating unique bounding boxes for 75 frames
[2025-09-04 17:36:28] Using 'final' zoom mode - calculating single bounding box for entire route
[2025-09-04 17:36:28] Saved final bounding box to temporary files\route\final_bounding_box.pkl
[2025-09-04 17:36:28] Final zoom mode: calculated single bounding box (24.28361, 25.460457, 60.103932, 60.432233) from 1 route
[2025-09-04 17:36:28] Found 1 unique bounding boxes
[2025-09-04 17:36:28] Starting tile pre-caching for video generation
[2025-09-04 17:36:28] Using cache directory: X:\softa\code\Projects\Route squiggler render client\map tile cache\OSM
[2025-09-04 17:36:28] Processing 1 unique bounding boxes
[2025-09-04 17:36:28] Phase 1: Gathering all required tiles...
[2025-09-04 17:36:28] Found 35 unique tiles required across all bounding boxes
[2025-09-04 17:36:28] Phase 2: Checking which tiles are already cached...
[2025-09-04 17:36:28] Tile analysis complete: 35 already cached, 0 need downloading
[2025-09-04 17:36:28] All tiles are already cached! No downloads needed.
[2025-09-04 17:36:28] Starting render timer - beginning map image caching and video generation
[2025-09-04 17:36:29] Starting route image caching for final zoom mode optimization (shared memory)...
[2025-09-04 17:36:29] Loaded final bounding box: (24.28361, 25.460457, 60.103932, 60.432233)
[2025-09-04 17:36:29] Using final bounding box: (24.28361, 25.460457, 60.103932, 60.432233)
[2025-09-04 17:36:29] Caching route 1/1: 'Unnamed' (96 points, route_index=0)
[2025-09-04 17:36:29] Route image caching completed: 20 track images cached from 1 routes in shared memory
[2025-09-04 17:36:29] Built track-to-cache mapping with 20 entries for frame generation optimization
[2025-09-04 17:36:29] Step 4: Caching map images for unique bounding boxes
[2025-09-04 17:36:29] Starting map image caching
[2025-09-04 17:36:29] Calculating unique bounding boxes for 75 frames
[2025-09-04 17:36:29] Using 'final' zoom mode - calculating single bounding box for entire route
[2025-09-04 17:36:29] Saved final bounding box to temporary files\route\final_bounding_box.pkl
[2025-09-04 17:36:29] Final zoom mode: calculated single bounding box (24.28361, 25.460457, 60.103932, 60.432233) from 1 route
[2025-09-04 17:36:29] Found 1 unique bounding boxes
[2025-09-04 17:36:29] Starting map image caching for video generation
[2025-09-04 17:36:29] Processing 1 unique bounding boxes for map images
[2025-09-04 17:36:29] Using 1 worker processes for map image generation
[2025-09-04 17:36:30] Using single-threaded execution
[2025-09-04 17:36:31] Map image caching complete: 1 successful, 0 failed, 1 total
[2025-09-04 17:36:31] Map image caching completed:
[2025-09-04 17:36:31]   - Images created: 1
[2025-09-04 17:36:31]   - Images failed: 0
[2025-09-04 17:36:31]   - Total bounding boxes: 1
[2025-09-04 17:36:31] Step 5: Generating video frames
[2025-09-04 17:36:31] Starting video generation
[2025-09-04 17:36:31] Route time per frame: 2026.0000 seconds
[2025-09-04 17:36:31] Starting video frame generation with streaming approach...
[2025-09-04 17:36:31] Starting streaming video creation
[2025-09-04 17:36:31] SEQUENTIAL MODE: Creating video: 15.0s route + 3s tail + 2.0s cloned = 20.0s total
[2025-09-04 17:36:31] Frame breakdown: 75 route + 15 tail + 10 cloned = 100 total frames
[2025-09-04 17:36:31] Output video will be saved to: temporary files\test jobs\route_video_20250904_173631.mp4
[2025-09-04 17:36:31] Test job mode: Video will be saved in test jobs directory
[2025-09-04 17:36:35] Starting video encoding
[2025-09-04 17:36:35] Using GPU rendering (NVIDIA NVENC)
[2025-09-04 17:36:48] Streaming video creation complete: temporary files\test jobs\route_video_20250904_173631.mp4
[2025-09-04 17:36:48] MoviePy and FFmpeg processes cleaned up
[2025-09-04 17:36:48] SEQUENTIAL MODE: Video creation completed: 90 frames generated + 10 frames cloned = 100 total frames
[2025-09-04 17:36:48] Video frame generation completed:
[2025-09-04 17:36:48]   - Frames created: 90
[2025-09-04 17:36:48]   - Frames failed: 0
[2025-09-04 17:36:48]   - Total frames: 100
[2025-09-04 17:36:48]   - Video file: temporary files\test jobs\route_video_20250904_173631.mp4
[2025-09-04 17:36:48] 🎬 Total rendering time: 19.86 seconds
[2025-09-04 17:36:48] Test job completed - skipping upload
[2025-09-04 17:36:48] Video generation completed successfully
[2025-09-04 17:36:48] Matplotlib and Qt resources cleaned up
[2025-09-04 17:36:48] Force-killed any remaining FFmpeg processes
[2025-09-04 17:36:48] MoviePy and FFmpeg processes cleaned up
[2025-09-04 17:36:48] Matplotlib and Qt resources cleaned up
[2025-09-04 17:36:48] Force-killed any remaining FFmpeg processes
[2025-09-04 17:36:48] MoviePy and FFmpeg processes cleaned up
[2025-09-04 17:36:48] Forced Qt resource cleanup completed
[2025-09-04 17:36:48] All test video jobs completed.
[2025-09-04 17:37:53] Starting test video job 1/1: test videos\video test 20routes
[2025-09-04 17:37:53] === on_job_received called ===
[2025-09-04 17:37:53] Processing job #1000023 (type: video)
[2025-09-04 17:37:53] Creating video generator worker...
[2025-09-04 17:37:53] Connecting worker signals...
[2025-09-04 17:37:53] Starting worker thread...
[2025-09-04 17:37:53] Worker thread started successfully
[2025-09-04 17:37:53] === on_job_received completed successfully ===
[2025-09-04 17:37:53] Video generation triggered.
[2025-09-04 17:37:53] Step 1: Sorting GPX files chronologically
[2025-09-04 17:37:53] Sorting 20 GPX files chronologically...
[2025-09-04 17:37:53] Found timestamp in 2024-05-18 kehä3.gpx: 2024-05-18 14:20:24
[2025-09-04 17:37:53] Found timestamp in 2022-06-26.gpx: 2022-06-26 17:24:08
[2025-09-04 17:37:53] Found timestamp in 2023-06-02.gpx: 2023-06-02 19:40:06
[2025-09-04 17:37:53] Found timestamp in 2023-06-13.gpx: 2023-06-13 17:25:05
[2025-09-04 17:37:53] Found timestamp in 2023-06-14.gpx: 2023-06-14 18:17:49
[2025-09-04 17:37:53] Found timestamp in 2024-05-19.gpx: 2024-05-19 16:17:36
[2025-09-04 17:37:53] Found timestamp in 2024-06-27.gpx: 2024-06-27 18:09:54
[2025-09-04 17:37:53] Found timestamp in 2024-07-09.gpx: 2024-07-09 13:46:48
[2025-09-04 17:37:53] Found timestamp in 2018-05-23.gpx: 2018-05-23 14:01:17
[2025-09-04 17:37:53] Found timestamp in 2018-06-10.gpx: 2018-06-10 12:56:58
[2025-09-04 17:37:53] Found timestamp in 2018-07-15.gpx: 2018-07-15 15:43:29
[2025-09-04 17:37:53] Found timestamp in 2018-07-17.gpx: 2018-07-17 19:05:37
[2025-09-04 17:37:53] Found timestamp in 2019-12-04_4.gpx: 2019-12-04 17:44:43
[2025-09-04 17:37:53] Found timestamp in 2019-12-14.gpx: 2019-12-14 20:24:01
[2025-09-04 17:37:53] Found timestamp in 2020-06-13_2.gpx: 2020-06-13 08:44:35
[2025-09-04 17:37:53] Found timestamp in 2020-06-13_3.gpx: 2020-06-13 14:30:06
[2025-09-04 17:37:53] Found timestamp in 2020-06-26.gpx: 2020-06-26 14:11:32
[2025-09-04 17:37:53] Found timestamp in 2021-05-14.gpx: 2021-05-14 09:00:48
[2025-09-04 17:37:53] Found timestamp in 2021-05-16.gpx: 2021-05-16 10:28:27
[2025-09-04 17:37:53] Found timestamp in 2021-06-10.gpx: 2021-06-10 13:25:14
[2025-09-04 17:37:53] Chronological sorting completed:
[2025-09-04 17:37:53] Oldest route: 2018-05-23.gpx (2018-05-23 14:01:17)
[2025-09-04 17:37:53] Newest route: 2024-07-09.gpx (2024-07-09 13:46:48)
[2025-09-04 17:37:53] Total files sorted: 20
[2025-09-04 17:37:53] Chronological sorting completed with 20 files
[2025-09-04 17:37:53] Step 2: Creating combined route
[2025-09-04 17:37:53] Creating combined routes from sorted GPX files...
[2025-09-04 17:37:53] Single route mode: All track names are empty
[2025-09-04 17:37:53] Creating single combined route...
[2025-09-04 17:37:53] Grouped files by track: 0 named tracks, 20 unnamed files
[2025-09-04 17:37:53] Processing 20 unnamed files
[2025-09-04 17:37:53] Creating route 0 for track 'Unnamed' with 20 files
[2025-09-04 17:37:53]   Processing 2018-05-23.gpx, accumulated distance: 0.00 meters, accumulated time: 0.0 seconds
[2025-09-04 17:37:53]   Processing 2018-06-10.gpx, accumulated distance: 31766.06 meters, accumulated time: 8347.0 seconds
[2025-09-04 17:37:53]   Processing 2018-07-15.gpx, accumulated distance: 79270.87 meters, accumulated time: 22165.0 seconds
[2025-09-04 17:37:53]   Processing 2018-07-17.gpx, accumulated distance: 123163.43 meters, accumulated time: 34298.0 seconds
[2025-09-04 17:37:53]   Processing 2019-12-04_4.gpx, accumulated distance: 150638.62 meters, accumulated time: 43773.0 seconds
[2025-09-04 17:37:53]   Processing 2019-12-14.gpx, accumulated distance: 154212.81 meters, accumulated time: 44680.0 seconds
[2025-09-04 17:37:54]   Processing 2020-06-13_2.gpx, accumulated distance: 168516.68 meters, accumulated time: 48134.0 seconds
[2025-09-04 17:37:54]   Processing 2020-06-13_3.gpx, accumulated distance: 185668.60 meters, accumulated time: 53974.0 seconds
[2025-09-04 17:37:54]   Processing 2020-06-26.gpx, accumulated distance: 224062.39 meters, accumulated time: 65738.0 seconds
[2025-09-04 17:37:54]   Processing 2021-05-14.gpx, accumulated distance: 236125.01 meters, accumulated time: 68845.0 seconds
[2025-09-04 17:37:54]   Processing 2021-05-16.gpx, accumulated distance: 278494.00 meters, accumulated time: 87434.0 seconds
[2025-09-04 17:37:55]   Processing 2021-06-10.gpx, accumulated distance: 335424.71 meters, accumulated time: 106374.0 seconds
[2025-09-04 17:37:55]   Processing 2022-06-26.gpx, accumulated distance: 386143.25 meters, accumulated time: 121939.0 seconds
[2025-09-04 17:37:55]   Processing 2023-06-02.gpx, accumulated distance: 392320.90 meters, accumulated time: 123449.0 seconds
[2025-09-04 17:37:55]   Processing 2023-06-13.gpx, accumulated distance: 412048.24 meters, accumulated time: 131290.0 seconds
[2025-09-04 17:37:55]   Processing 2023-06-14.gpx, accumulated distance: 419424.06 meters, accumulated time: 132944.0 seconds
[2025-09-04 17:37:55]   Processing 2024-05-18 kehä3.gpx, accumulated distance: 433614.80 meters, accumulated time: 136591.0 seconds
[2025-09-04 17:37:56]   Processing 2024-05-19.gpx, accumulated distance: 535197.70 meters, accumulated time: 160066.0 seconds
[2025-09-04 17:37:56]   Processing 2024-06-27.gpx, accumulated distance: 547227.03 meters, accumulated time: 161873.0 seconds
[2025-09-04 17:37:56]   Processing 2024-07-09.gpx, accumulated distance: 563755.60 meters, accumulated time: 165157.0 seconds
[2025-09-04 17:37:56]   Completed track 'Unnamed'. Total points: 59197
[2025-09-04 17:37:56]   Total distance: 600084.41 meters (600.08 km)
[2025-09-04 17:37:56]   Total time: 171594.0 seconds (2859.9 minutes)
[2025-09-04 17:37:56]   Calculated dynamic pruning interval for track 'Unnamed': ~1 point/frame → raw=571.98s (gpx_time_per_video_time/video_fps), reduced by 20% → 457.58s, interval=458s
[2025-09-04 17:37:56]   Starting route pruning for track 'Unnamed': 59,197 points, interval: 458 seconds
[2025-09-04 17:37:56]   Interpolation interval for track 'Unnamed' (for later use): 1143.96s
[2025-09-04 17:37:56] Pruning route by 458 second intervals...
[2025-09-04 17:37:56] Original route has 59197 points
[2025-09-04 17:37:56] Pruning complete
[2025-09-04 17:37:56] Interpolation complete: 340 → 351 points
[2025-09-04 17:37:56] Single route mode: Using sequential time accumulation: 167005.0s
[2025-09-04 17:37:56] Created 1 routes:
[2025-09-04 17:37:56]   Route 0: 'Unnamed' - 351 points, 431854.25m
[2025-09-04 17:37:56] Total across all routes: 351 points, 431854.25m
[2025-09-04 17:37:56] Wrote debug_tuple.txt successfully to temporary files\route\debug_tuple.txt
[2025-09-04 17:37:56] Combined route created successfully:
[2025-09-04 17:37:56]   - Total points: 351
[2025-09-04 17:37:56]   - Total distance: 431.85 km
[2025-09-04 17:37:56]   - Files processed: 20
[2025-09-04 17:37:56] Step 3: Calculating unique bounding boxes and caching map tiles
[2025-09-04 17:37:56] Starting map tile caching
[2025-09-04 17:37:56] Calculating unique bounding boxes for 300 frames
[2025-09-04 17:37:56] Using 'final' zoom mode - calculating single bounding box for entire route
[2025-09-04 17:37:56] Saved final bounding box to temporary files\route\final_bounding_box.pkl
[2025-09-04 17:37:56] Final zoom mode: calculated single bounding box (24.269105, 25.47454, 60.097258, 60.433562) from 1 route
[2025-09-04 17:37:56] Found 1 unique bounding boxes
[2025-09-04 17:37:56] Starting tile pre-caching for video generation
[2025-09-04 17:37:56] Using cache directory: X:\softa\code\Projects\Route squiggler render client\map tile cache\OSM
[2025-09-04 17:37:56] Processing 1 unique bounding boxes
[2025-09-04 17:37:56] Phase 1: Gathering all required tiles...
[2025-09-04 17:37:56] Found 35 unique tiles required across all bounding boxes
[2025-09-04 17:37:56] Phase 2: Checking which tiles are already cached...
[2025-09-04 17:37:56] Tile analysis complete: 35 already cached, 0 need downloading
[2025-09-04 17:37:56] All tiles are already cached! No downloads needed.
[2025-09-04 17:37:56] Starting render timer - beginning map image caching and video generation
[2025-09-04 17:37:58] Starting route image caching for final zoom mode optimization (shared memory)...
[2025-09-04 17:37:58] Loaded final bounding box: (24.269105, 25.47454, 60.097258, 60.433562)
[2025-09-04 17:37:58] Using final bounding box: (24.269105, 25.47454, 60.097258, 60.433562)
[2025-09-04 17:37:58] Caching route 1/1: 'Unnamed' (351 points, route_index=0)
[2025-09-04 17:37:58] Route image caching completed: 20 track images cached from 1 routes in shared memory
[2025-09-04 17:37:58] Built track-to-cache mapping with 20 entries for frame generation optimization
[2025-09-04 17:37:58] Step 4: Caching map images for unique bounding boxes
[2025-09-04 17:37:58] Starting map image caching
[2025-09-04 17:37:58] Calculating unique bounding boxes for 300 frames
[2025-09-04 17:37:58] Using 'final' zoom mode - calculating single bounding box for entire route
[2025-09-04 17:37:58] Saved final bounding box to temporary files\route\final_bounding_box.pkl
[2025-09-04 17:37:58] Final zoom mode: calculated single bounding box (24.269105, 25.47454, 60.097258, 60.433562) from 1 route
[2025-09-04 17:37:58] Found 1 unique bounding boxes
[2025-09-04 17:37:58] Starting map image caching for video generation
[2025-09-04 17:37:58] Processing 1 unique bounding boxes for map images
[2025-09-04 17:37:58] Using 1 worker processes for map image generation
[2025-09-04 17:37:59] Using single-threaded execution
[2025-09-04 17:37:59] Map image caching complete: 1 successful, 0 failed, 1 total
[2025-09-04 17:37:59] Map image caching completed:
[2025-09-04 17:37:59]   - Images created: 1
[2025-09-04 17:37:59]   - Images failed: 0
[2025-09-04 17:37:59]   - Total bounding boxes: 1
[2025-09-04 17:37:59] Step 5: Generating video frames
[2025-09-04 17:37:59] Starting video generation
[2025-09-04 17:37:59] Route time per frame: 556.6833 seconds
[2025-09-04 17:37:59] Starting video frame generation with streaming approach...
[2025-09-04 17:37:59] Starting streaming video creation
[2025-09-04 17:37:59] SEQUENTIAL MODE: Creating video: 15.0s route + 3s tail + 2.0s cloned = 20.0s total
[2025-09-04 17:37:59] Frame breakdown: 300 route + 60 tail + 40 cloned = 400 total frames
[2025-09-04 17:37:59] Output video will be saved to: temporary files\test jobs\route_video_20250904_173759.mp4
[2025-09-04 17:37:59] Test job mode: Video will be saved in test jobs directory
[2025-09-04 17:38:03] Starting video encoding
[2025-09-04 17:38:03] Using GPU rendering (NVIDIA NVENC)
[2025-09-04 17:38:56] Streaming video creation complete: temporary files\test jobs\route_video_20250904_173759.mp4
[2025-09-04 17:38:56] MoviePy and FFmpeg processes cleaned up
[2025-09-04 17:38:56] SEQUENTIAL MODE: Video creation completed: 360 frames generated + 40 frames cloned = 400 total frames
[2025-09-04 17:38:56] Video frame generation completed:
[2025-09-04 17:38:56]   - Frames created: 360
[2025-09-04 17:38:56]   - Frames failed: 0
[2025-09-04 17:38:56]   - Total frames: 400
[2025-09-04 17:38:56]   - Video file: temporary files\test jobs\route_video_20250904_173759.mp4
[2025-09-04 17:38:56] 🎬 Total rendering time: 59.94 seconds
[2025-09-04 17:38:56] Test job completed - skipping upload
[2025-09-04 17:38:56] Video generation completed successfully
[2025-09-04 17:38:57] Matplotlib and Qt resources cleaned up
[2025-09-04 17:38:57] Force-killed any remaining FFmpeg processes
[2025-09-04 17:38:57] MoviePy and FFmpeg processes cleaned up
[2025-09-04 17:38:57] Matplotlib and Qt resources cleaned up
[2025-09-04 17:38:57] Force-killed any remaining FFmpeg processes
[2025-09-04 17:38:57] MoviePy and FFmpeg processes cleaned up
[2025-09-04 17:38:57] Forced Qt resource cleanup completed
[2025-09-04 17:38:57] All test video jobs completed.
